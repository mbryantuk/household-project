{
  "numFailedTestSuites": 10,
  "numFailedTests": 29,
  "numPassedTestSuites": 5,
  "numPassedTests": 17,
  "numPendingTestSuites": 0,
  "numPendingTests": 0,
  "numRuntimeErrorTestSuites": 2,
  "numTodoTests": 0,
  "numTotalTestSuites": 15,
  "numTotalTests": 46,
  "openHandles": [],
  "snapshot": {
    "added": 0,
    "didUpdate": false,
    "failure": false,
    "filesAdded": 0,
    "filesRemoved": 0,
    "filesRemovedList": [],
    "filesUnmatched": 0,
    "filesUpdated": 0,
    "matched": 0,
    "total": 0,
    "unchecked": 0,
    "uncheckedKeysByFile": [],
    "unmatched": 0,
    "updated": 0
  },
  "startTime": 1771027428760,
  "success": false,
  "testResults": [
    {
      "leaks": false,
      "numFailingTests": 0,
      "numPassingTests": 1,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027445645,
        "runtime": 16782,
        "slow": true,
        "start": 1771027428863
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/brady_seed.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ‘ª Master Seed: The Brady Bunch"
          ],
          "duration": 14958,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "ðŸ‘ª Master Seed: The Brady Bunch Should successfully seed the entire Brady Bunch household via API",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 14,
          "retryReasons": [],
          "status": "passed",
          "title": "Should successfully seed the entire Brady Bunch household via API"
        }
      ],
      "failureMessage": null
    },
    {
      "leaks": false,
      "numFailingTests": 6,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027446167,
        "runtime": 488,
        "slow": false,
        "start": 1771027445679
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/shopping.spec.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 12,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 201,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 201\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 201\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:64:32)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should add a shopping item",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should add a shopping item"
        },
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 12,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 200,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:80:32)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should list shopping items and calculate budget",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should list shopping items and calculate budget"
        },
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 12,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 200,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:99:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should update an item",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should update an item"
        },
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 10,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 200,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:114:32)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should delete an item",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should delete an item"
        },
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 18,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 200,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:129:32)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should NOT see items from another household (Tenancy Rule)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should NOT see items from another household (Tenancy Rule)"
        },
        {
          "ancestorTitles": [
            "Shopping List API"
          ],
          "duration": 19,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 200,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/shopping.spec.js:161:37)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "Shopping List API should clear checked items",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should clear checked items"
        }
      ],
      "failureMessage": "  â— Shopping List API â€º should add a shopping item\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 201\n    Received: 403\n\n      62 |             });\n      63 |         \n    > 64 |         expect(res.statusCode).toBe(201);\n         |                                ^\n      65 |         expect(res.body.name).toBe('Milk');\n      66 |         expect(res.body.estimated_cost).toBe(2.5);\n      67 |     });\n\n      at Object.toBe (tests/shopping.spec.js:64:32)\n\n  â— Shopping List API â€º should list shopping items and calculate budget\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n      78 |             .set('Authorization', `Bearer ${token}`);\n      79 |         \n    > 80 |         expect(res.statusCode).toBe(200);\n         |                                ^\n      81 |         expect(res.body.items.length).toBeGreaterThanOrEqual(2);\n      82 |         expect(res.body.summary.total_estimated_cost).toBeGreaterThanOrEqual(4.0); // 2.5 + 1.5\n      83 |     });\n\n      at Object.toBe (tests/shopping.spec.js:80:32)\n\n  â— Shopping List API â€º should update an item\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n       97 |             .send({ is_checked: true, quantity: '12' });\n       98 |         \n    >  99 |         expect(updateRes.statusCode).toBe(200);\n          |                                      ^\n      100 |         expect(updateRes.body.is_checked).toBe(1);\n      101 |         expect(updateRes.body.quantity).toBe('12');\n      102 |     });\n\n      at Object.toBe (tests/shopping.spec.js:99:38)\n\n  â— Shopping List API â€º should delete an item\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n      112 |             .set('Authorization', `Bearer ${token}`);\n      113 |         \n    > 114 |         expect(res.statusCode).toBe(200);\n          |                                ^\n      115 |     });\n      116 |\n      117 |     test('should NOT see items from another household (Tenancy Rule)', async () => {\n\n      at Object.toBe (tests/shopping.spec.js:114:32)\n\n  â— Shopping List API â€º should NOT see items from another household (Tenancy Rule)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n      127 |             .set('Authorization', `Bearer ${otherToken}`);\n      128 |         \n    > 129 |         expect(res.statusCode).toBe(200);\n          |                                ^\n      130 |         const secretItem = res.body.items.find(i => i.name === 'Primary Secret');\n      131 |         expect(secretItem).toBeUndefined();\n      132 |     });\n\n      at Object.toBe (tests/shopping.spec.js:129:32)\n\n  â— Shopping List API â€º should clear checked items\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n      159 |             .set('Authorization', `Bearer ${token}`);\n      160 |         \n    > 161 |         expect(clearRes.statusCode).toBe(200);\n          |                                     ^\n      162 |\n      163 |         // Verify gone\n      164 |         const listRes = await request(app)\n\n      at Object.toBe (tests/shopping.spec.js:161:37)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 1,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027446729,
        "runtime": 317,
        "slow": false,
        "start": 1771027446412
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/performance/concurrency.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "âš¡ SQLite Concurrency Stress"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/performance/concurrency.test.js:17:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "âš¡ SQLite Concurrency Stress ðŸ§¬ WAL Mode Concurrency (20 Parallel Writes)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ§¬ WAL Mode Concurrency (20 Parallel Writes)"
        }
      ],
      "failureMessage": "  â— âš¡ SQLite Concurrency Stress â€º ðŸ§¬ WAL Mode Concurrency (20 Parallel Writes)\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      15 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      16 |         token = login.body.token;\n    > 17 |         householdId = login.body.user.default_household_id;\n         |                                       ^\n      18 |         \n      19 |         if (!householdId) {\n      20 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n\n      at Object.default_household_id (tests/performance/concurrency.test.js:17:39)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 6,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027447106,
        "runtime": 369,
        "slow": false,
        "start": 1771027446737
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 1,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸ”‘ Authentication Profile",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ”‘ Authentication Profile"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸ”„ Module: Recurring Costs (Consolidated)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ”„ Module: Recurring Costs (Consolidated)"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸ‘¥ Module: People",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ‘¥ Module: People"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸš— Module: Vehicles",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸš— Module: Vehicles"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸ’° Module: Finance (Core)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ’° Module: Finance (Core)"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/api_coverage_and_rbac.test.js:55:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification ðŸ± Module: Meals",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ± Module: Meals"
        }
      ],
      "failureMessage": "  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸ”‘ Authentication Profile\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n\n  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸ”„ Module: Recurring Costs (Consolidated)\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n\n  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸ‘¥ Module: People\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n\n  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸš— Module: Vehicles\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n\n  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸ’° Module: Finance (Core)\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n\n  â— ðŸ›¡ï¸ Comprehensive Backend API & RBAC Verification â€º ðŸ± Module: Meals\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      53 |         tokens.admin = lAdmin.body.token;\n      54 |         \n    > 55 |         householdId = lAdmin.body.user.default_household_id;\n         |                                        ^\n      56 |         if (!householdId) {\n      57 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${tokens.admin}`);\n      58 |             householdId = hList.body[0]?.id;\n\n      at Object.default_household_id (tests/security/api_coverage_and_rbac.test.js:55:40)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 4,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027447453,
        "runtime": 298,
        "slow": false,
        "start": 1771027447155
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/security/advanced_integrity.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Advanced System Integrity & Security"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/advanced_integrity.test.js:19:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Advanced System Integrity & Security ðŸ“… Friday Rule: Creation with valid payload",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ“… Friday Rule: Creation with valid payload"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Advanced System Integrity & Security"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/advanced_integrity.test.js:19:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Advanced System Integrity & Security â™»ï¸ Idempotency: Duplicate creation check",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "â™»ï¸ Idempotency: Duplicate creation check"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Advanced System Integrity & Security"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/advanced_integrity.test.js:19:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Advanced System Integrity & Security ðŸ›‘ Security: Path Traversal prevention",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ›‘ Security: Path Traversal prevention"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Advanced System Integrity & Security"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'default_household_id')\n    at Object.default_household_id (/home/matt/household-project/server/tests/security/advanced_integrity.test.js:19:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Advanced System Integrity & Security ðŸ’¾ Integrity: Backup Trigger",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ’¾ Integrity: Backup Trigger"
        }
      ],
      "failureMessage": "  â— ðŸ›¡ï¸ Advanced System Integrity & Security â€º ðŸ“… Friday Rule: Creation with valid payload\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      17 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      18 |         token = login.body.token;\n    > 19 |         householdId = login.body.user.default_household_id;\n         |                                       ^\n      20 |\n      21 |         if (!householdId) {\n      22 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n\n      at Object.default_household_id (tests/security/advanced_integrity.test.js:19:39)\n\n  â— ðŸ›¡ï¸ Advanced System Integrity & Security â€º â™»ï¸ Idempotency: Duplicate creation check\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      17 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      18 |         token = login.body.token;\n    > 19 |         householdId = login.body.user.default_household_id;\n         |                                       ^\n      20 |\n      21 |         if (!householdId) {\n      22 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n\n      at Object.default_household_id (tests/security/advanced_integrity.test.js:19:39)\n\n  â— ðŸ›¡ï¸ Advanced System Integrity & Security â€º ðŸ›‘ Security: Path Traversal prevention\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      17 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      18 |         token = login.body.token;\n    > 19 |         householdId = login.body.user.default_household_id;\n         |                                       ^\n      20 |\n      21 |         if (!householdId) {\n      22 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n\n      at Object.default_household_id (tests/security/advanced_integrity.test.js:19:39)\n\n  â— ðŸ›¡ï¸ Advanced System Integrity & Security â€º ðŸ’¾ Integrity: Backup Trigger\n\n    TypeError: Cannot read properties of undefined (reading 'default_household_id')\n\n      17 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      18 |         token = login.body.token;\n    > 19 |         householdId = login.body.user.default_household_id;\n         |                                       ^\n      20 |\n      21 |         if (!householdId) {\n      22 |             const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n\n      at Object.default_household_id (tests/security/advanced_integrity.test.js:19:39)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 2,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027447738,
        "runtime": 278,
        "slow": false,
        "start": 1771027447460
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/security/destroy_tenant.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ’£ Tenant Destruction & Cleanup"
          ],
          "duration": 1,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/security/destroy_tenant.test.js:26:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ’£ Tenant Destruction & Cleanup ðŸ§¨ Destroy Tenant: Regular Admin should remove all traces",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ§¨ Destroy Tenant: Regular Admin should remove all traces"
        },
        {
          "ancestorTitles": [
            "ðŸ’£ Tenant Destruction & Cleanup"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/security/destroy_tenant.test.js:26:34)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ’£ Tenant Destruction & Cleanup ðŸ‘‘ Destroy Tenant: System Admin should be able to destroy ANY household",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "ðŸ‘‘ Destroy Tenant: System Admin should be able to destroy ANY household"
        }
      ],
      "failureMessage": "  â— ðŸ’£ Tenant Destruction & Cleanup â€º ðŸ§¨ Destroy Tenant: Regular Admin should remove all traces\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      24 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      25 |         token = login.body.token;\n    > 26 |         userId = login.body.user.id;\n         |                                  ^\n      27 |         \n      28 |         const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n      29 |         householdId = hList.body[0]?.id;\n\n      at Object.id (tests/security/destroy_tenant.test.js:26:34)\n\n  â— ðŸ’£ Tenant Destruction & Cleanup â€º ðŸ‘‘ Destroy Tenant: System Admin should be able to destroy ANY household\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      24 |         const login = await request(app).post('/api/auth/login').send({ email: ADMIN_EMAIL, password: PASSWORD });\n      25 |         token = login.body.token;\n    > 26 |         userId = login.body.user.id;\n         |                                  ^\n      27 |         \n      28 |         const hList = await request(app).get('/api/auth/my-households').set('Authorization', `Bearer ${token}`);\n      29 |         householdId = hList.body[0]?.id;\n\n      at Object.id (tests/security/destroy_tenant.test.js:26:34)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 0,
      "numPassingTests": 5,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027448929,
        "runtime": 1186,
        "slow": false,
        "start": 1771027447743
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/performance/load.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Performance & Speed Tests"
          ],
          "duration": 26,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Performance & Speed Tests should measure login speed (Heavy Bcrypt)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should measure login speed (Heavy Bcrypt)"
        },
        {
          "ancestorTitles": [
            "Performance & Speed Tests"
          ],
          "duration": 153,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Performance & Speed Tests should measure GET assets speed (Plain Read)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should measure GET assets speed (Plain Read)"
        },
        {
          "ancestorTitles": [
            "Performance & Speed Tests"
          ],
          "duration": 143,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Performance & Speed Tests should measure GET finance savings speed (Decryption Overhead)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should measure GET finance savings speed (Decryption Overhead)"
        },
        {
          "ancestorTitles": [
            "Performance & Speed Tests"
          ],
          "duration": 52,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Performance & Speed Tests should measure POST asset speed (Plain Write)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should measure POST asset speed (Plain Write)"
        },
        {
          "ancestorTitles": [
            "Performance & Speed Tests"
          ],
          "duration": 513,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Performance & Speed Tests should handle \"Load\" (Concurrent requests)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should handle \"Load\" (Concurrent requests)"
        }
      ],
      "failureMessage": null
    },
    {
      "leaks": false,
      "numFailingTests": 2,
      "numPassingTests": 1,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027452019,
        "runtime": 360,
        "slow": false,
        "start": 1771027451659
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/finance_routing.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ’° Finance Routing Verification"
          ],
          "duration": 8,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "ðŸ’° Finance Routing Verification GET /api/households/:id/finance/savings/pots should not return 404",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "GET /api/households/:id/finance/savings/pots should not return 404"
        },
        {
          "ancestorTitles": [
            "ðŸ’° Finance Routing Verification"
          ],
          "duration": 7,
          "failureDetails": [
            {
              "matcherResult": {
                "message": "expect(received).toBeDefined()\n\nReceived: undefined",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.toBeDefined (/home/matt/household-project/server/tests/finance_routing.test.js:53:24)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ’° Finance Routing Verification GET /api/households/:id/finance/savings/:itemId should still work for valid items",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "GET /api/households/:id/finance/savings/:itemId should still work for valid items"
        },
        {
          "ancestorTitles": [
            "ðŸ’° Finance Routing Verification"
          ],
          "duration": 6,
          "failureDetails": [
            {
              "matcherResult": {
                "actual": 403,
                "expected": 404,
                "message": "expect(received).toBe(expected) // Object.is equality\n\nExpected: 404\nReceived: 403",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 404\nReceived: 403\n    at Object.toBe (/home/matt/household-project/server/tests/finance_routing.test.js:68:28)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ’° Finance Routing Verification GET /api/households/:id/finance/savings/999999 should return 404",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "GET /api/households/:id/finance/savings/999999 should return 404"
        }
      ],
      "failureMessage": "  â— ðŸ’° Finance Routing Verification â€º GET /api/households/:id/finance/savings/:itemId should still work for valid items\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      51 |         \n      52 |         const itemId = createRes.body.id;\n    > 53 |         expect(itemId).toBeDefined();\n         |                        ^\n      54 |\n      55 |         const res = await request(app)\n      56 |             .get(`/api/households/${householdId}/finance/savings/${itemId}`)\n\n      at Object.toBeDefined (tests/finance_routing.test.js:53:24)\n\n  â— ðŸ’° Finance Routing Verification â€º GET /api/households/:id/finance/savings/999999 should return 404\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 404\n    Received: 403\n\n      66 |             .set('Authorization', `Bearer ${token}`);\n      67 |         \n    > 68 |         expect(res.status).toBe(404);\n         |                            ^\n      69 |     });\n      70 | });\n\n      at Object.toBe (tests/finance_routing.test.js:68:28)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 3,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027452352,
        "runtime": 279,
        "slow": false,
        "start": 1771027452073
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/security/export_tenant.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Tenant Export Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/security/export_tenant.test.js:32:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Tenant Export Verification GET /api/admin/households/:id/export should return a backup filename (System Admin)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "GET /api/admin/households/:id/export should return a backup filename (System Admin)"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Tenant Export Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/security/export_tenant.test.js:32:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Tenant Export Verification Non-system-admin should not be able to export (even if household admin)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "Non-system-admin should not be able to export (even if household admin)"
        },
        {
          "ancestorTitles": [
            "ðŸ›¡ï¸ Tenant Export Verification"
          ],
          "duration": 1,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/security/export_tenant.test.js:32:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸ›¡ï¸ Tenant Export Verification Export should contain manifest.json in the zip",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "Export should contain manifest.json in the zip"
        }
      ],
      "failureMessage": "  â— ðŸ›¡ï¸ Tenant Export Verification â€º GET /api/admin/households/:id/export should return a backup filename (System Admin)\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      30 |         adminToken = loginRes.body.token;\n      31 |         adminUser = loginRes.body.user;\n    > 32 |         householdId = loginRes.body.household.id;\n         |                                               ^\n      33 |     });\n      34 |\n      35 |     afterAll(async () => {\n\n      at Object.id (tests/security/export_tenant.test.js:32:47)\n\n  â— ðŸ›¡ï¸ Tenant Export Verification â€º Non-system-admin should not be able to export (even if household admin)\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      30 |         adminToken = loginRes.body.token;\n      31 |         adminUser = loginRes.body.user;\n    > 32 |         householdId = loginRes.body.household.id;\n         |                                               ^\n      33 |     });\n      34 |\n      35 |     afterAll(async () => {\n\n      at Object.id (tests/security/export_tenant.test.js:32:47)\n\n  â— ðŸ›¡ï¸ Tenant Export Verification â€º Export should contain manifest.json in the zip\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      30 |         adminToken = loginRes.body.token;\n      31 |         adminUser = loginRes.body.user;\n    > 32 |         householdId = loginRes.body.household.id;\n         |                                               ^\n      33 |     });\n      34 |\n      35 |     afterAll(async () => {\n\n      at Object.id (tests/security/export_tenant.test.js:32:47)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 2,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027452625,
        "runtime": 267,
        "slow": false,
        "start": 1771027452358
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/export_json.spec.js",
      "testResults": [
        {
          "ancestorTitles": [
            "ðŸš€ JSON Tenant Export Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/export_json.spec.js:27:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸš€ JSON Tenant Export Verification GET /api/export/:id should return a full JSON package",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "GET /api/export/:id should return a full JSON package"
        },
        {
          "ancestorTitles": [
            "ðŸš€ JSON Tenant Export Verification"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/export_json.spec.js:27:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"
          ],
          "fullName": "ðŸš€ JSON Tenant Export Verification Unauthorized user should not be able to export",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "Unauthorized user should not be able to export"
        }
      ],
      "failureMessage": "  â— ðŸš€ JSON Tenant Export Verification â€º GET /api/export/:id should return a full JSON package\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      25 |         \n      26 |         token = loginRes.body.token;\n    > 27 |         householdId = loginRes.body.household.id;\n         |                                               ^\n      28 |\n      29 |         // 3. Add some data to the tenant DB\n      30 |         await request(app)\n\n      at Object.id (tests/export_json.spec.js:27:47)\n\n  â— ðŸš€ JSON Tenant Export Verification â€º Unauthorized user should not be able to export\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      25 |         \n      26 |         token = loginRes.body.token;\n    > 27 |         householdId = loginRes.body.household.id;\n         |                                               ^\n      28 |\n      29 |         // 3. Add some data to the tenant DB\n      30 |         await request(app)\n\n      at Object.id (tests/export_json.spec.js:27:47)\n"
    },
    {
      "leaks": false,
      "numFailingTests": 2,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027452927,
        "runtime": 298,
        "slow": false,
        "start": 1771027452629
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/export.spec.js",
      "testResults": [
        {
          "ancestorTitles": [
            "GET /api/export/:household_id"
          ],
          "duration": 1,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "Error: Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n    at seedHousehold (/home/matt/household-project/server/tests/utils.js:14:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/home/matt/household-project/server/tests/export.spec.js:11:17)"
          ],
          "fullName": "GET /api/export/:household_id should return 404 if household_id is missing (route not matched)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should return 404 if household_id is missing (route not matched)"
        },
        {
          "ancestorTitles": [
            "GET /api/export/:household_id"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "Error: Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n    at seedHousehold (/home/matt/household-project/server/tests/utils.js:14:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/home/matt/household-project/server/tests/export.spec.js:11:17)"
          ],
          "fullName": "GET /api/export/:household_id should return 200 and export data if household_id is valid",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should return 200 and export data if household_id is valid"
        }
      ],
      "failureMessage": "  â— GET /api/export/:household_id â€º should return 404 if household_id is missing (route not matched)\n\n    Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n\n      12 |         \n      13 |     if (regRes.status !== 201) {\n    > 14 |         throw new Error(`Failed to seed household: ${JSON.stringify(regRes.body)}`);\n         |               ^\n      15 |     }\n      16 |     \n      17 |     // Login to get token and household info\n\n      at seedHousehold (tests/utils.js:14:15)\n      at Object.<anonymous> (tests/export.spec.js:11:17)\n\n  â— GET /api/export/:household_id â€º should return 200 and export data if household_id is valid\n\n    Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n\n      12 |         \n      13 |     if (regRes.status !== 201) {\n    > 14 |         throw new Error(`Failed to seed household: ${JSON.stringify(regRes.body)}`);\n         |               ^\n      15 |     }\n      16 |     \n      17 |     // Login to get token and household info\n\n      at seedHousehold (tests/utils.js:14:15)\n      at Object.<anonymous> (tests/export.spec.js:11:17)\n\n\n  â— Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      35 |   afterAll(async () => {\n      36 |     // Clean up\n    > 37 |     await dbRun(globalDb, 'DELETE FROM user_households WHERE household_id = ?', [household.id]);\n         |                                                                                            ^\n      38 |     await dbRun(globalDb, 'DELETE FROM households WHERE id = ?', [household.id]);\n      39 |   });\n      40 | });\n\n      at Object.id (tests/export.spec.js:37:92)\n",
      "testExecError": {
        "message": "",
        "stack": "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/export.spec.js:37:92)\n    at Promise.then.completed (/home/matt/household-project/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/matt/household-project/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/matt/household-project/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/matt/household-project/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/matt/household-project/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/matt/household-project/server/node_modules/jest-runner/build/runTest.js:444:34)"
      }
    },
    {
      "leaks": false,
      "numFailingTests": 1,
      "numPassingTests": 0,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027453211,
        "runtime": 278,
        "slow": false,
        "start": 1771027452933
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/routes/export.spec.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Export Route"
          ],
          "duration": 0,
          "failureDetails": [
            {}
          ],
          "failureMessages": [
            "Error: Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n    at seedHousehold (/home/matt/household-project/server/tests/utils.js:14:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/home/matt/household-project/server/tests/routes/export.spec.js:12:17)"
          ],
          "fullName": "Export Route should export household data as JSON",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "should export household data as JSON"
        }
      ],
      "failureMessage": "  â— Export Route â€º should export household data as JSON\n\n    Failed to seed household: {\"error\":\"System Upgrade in Progress\",\"message\":\"We are currently performing a scheduled maintenance. Please try again in a few minutes.\"}\n\n      12 |         \n      13 |     if (regRes.status !== 201) {\n    > 14 |         throw new Error(`Failed to seed household: ${JSON.stringify(regRes.body)}`);\n         |               ^\n      15 |     }\n      16 |     \n      17 |     // Login to get token and household info\n\n      at seedHousehold (tests/utils.js:14:15)\n      at Object.<anonymous> (tests/routes/export.spec.js:12:17)\n\n\n  â— Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      30 |   afterAll(async () => {\n      31 |     // Clean up the test household\n    > 32 |     await dbRun(globalDb, 'DELETE FROM households WHERE id = ?', [household.id]);\n         |                                                                             ^\n      33 |     await dbRun(globalDb, 'DELETE FROM users WHERE email = ?', [household.adminEmail]);\n      34 |     try {\n      35 |         const hhDb = getHouseholdDb(household.id);\n\n      at Object.id (tests/routes/export.spec.js:32:77)\n",
      "testExecError": {
        "message": "",
        "stack": "TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/home/matt/household-project/server/tests/routes/export.spec.js:32:77)\n    at Promise.then.completed (/home/matt/household-project/server/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/matt/household-project/server/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/matt/household-project/server/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/matt/household-project/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/matt/household-project/server/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/matt/household-project/server/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/matt/household-project/server/node_modules/jest-runner/build/runTest.js:444:34)"
      }
    },
    {
      "leaks": false,
      "numFailingTests": 0,
      "numPassingTests": 4,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027453578,
        "runtime": 358,
        "slow": false,
        "start": 1771027453220
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/security/audit_poc.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Security Audit Proof of Concept"
          ],
          "duration": 2,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Security Audit Proof of Concept Vulnerability 1: Hardcoded SECRET_KEY",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "Vulnerability 1: Hardcoded SECRET_KEY"
        },
        {
          "ancestorTitles": [
            "Security Audit Proof of Concept"
          ],
          "duration": 24,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Security Audit Proof of Concept Vulnerability 2: Path Traversal in Backup Download (FIXED)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "Vulnerability 2: Path Traversal in Backup Download (FIXED)"
        },
        {
          "ancestorTitles": [
            "Security Audit Proof of Concept"
          ],
          "duration": 25,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Security Audit Proof of Concept Vulnerability 3: Admin Escalation - Adding user to another household (FIXED)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "Vulnerability 3: Admin Escalation - Adding user to another household (FIXED)"
        },
        {
          "ancestorTitles": [
            "Security Audit Proof of Concept"
          ],
          "duration": 7,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Security Audit Proof of Concept Tenancy Verification: Viewer of HH 60 cannot access HH 3294",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "Tenancy Verification: Viewer of HH 60 cannot access HH 3294"
        }
      ],
      "failureMessage": null
    },
    {
      "leaks": false,
      "numFailingTests": 0,
      "numPassingTests": 3,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027453887,
        "runtime": 304,
        "slow": false,
        "start": 1771027453583
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/profile.spec.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Profile API"
          ],
          "duration": 15,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Profile API should retrieve the user profile with custom_theme",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 4,
          "retryReasons": [],
          "status": "passed",
          "title": "should retrieve the user profile with custom_theme"
        },
        {
          "ancestorTitles": [
            "Profile API"
          ],
          "duration": 15,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Profile API should update the user theme",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "should update the user theme"
        },
        {
          "ancestorTitles": [
            "Profile API"
          ],
          "duration": 9,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Profile API should update the custom_theme",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "should update the custom_theme"
        }
      ],
      "failureMessage": null
    },
    {
      "leaks": false,
      "numFailingTests": 0,
      "numPassingTests": 3,
      "numPendingTests": 0,
      "numTodoTests": 0,
      "openHandles": [],
      "perfStats": {
        "end": 1771027453938,
        "runtime": 46,
        "slow": false,
        "start": 1771027453892
      },
      "skipped": false,
      "snapshot": {
        "added": 0,
        "fileDeleted": false,
        "matched": 0,
        "unchecked": 0,
        "uncheckedKeys": [],
        "unmatched": 0,
        "updated": 0
      },
      "testFilePath": "/home/matt/household-project/server/tests/performance/smoke.test.js",
      "testResults": [
        {
          "ancestorTitles": [
            "Frontend Build Smoke Test"
          ],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Frontend Build Smoke Test index.html should exist after build",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "index.html should exist after build"
        },
        {
          "ancestorTitles": [
            "Frontend Build Smoke Test"
          ],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Frontend Build Smoke Test index.html should contain root div",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "index.html should contain root div"
        },
        {
          "ancestorTitles": [
            "Frontend Build Smoke Test"
          ],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Frontend Build Smoke Test JS bundle should be referenced",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "JS bundle should be referenced"
        }
      ],
      "failureMessage": null
    }
  ],
  "wasInterrupted": false
}