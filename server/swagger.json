{
  "openapi": "3.0.0",
  "info": {
    "title": "Totem Household SaaS API",
    "version": "3.1.1",
    "description": "Multi-tenant household management API with strict data isolation and RBAC. Admins have full rights, Members have object CRUD except for household management, and Viewers are read-only.",
    "contact": {
      "name": "Lead Architect"
    }
  },
  "servers": [
    { "url": "/api" }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "Household": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "address_street": { "type": "string" },
          "address_city": { "type": "string" },
          "address_zip": { "type": "string" },
          "currency": { "type": "string" },
          "date_format": { "type": "string" },
          "enabled_modules": { "type": "string", "description": "JSON string of enabled modules" }
        }
      },
      "Member": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "type": { "type": "string", "enum": ["adult", "child", "pet"] },
          "emoji": { "type": "string" },
          "dob": { "type": "string", "format": "date", "description": "Encrypted in DB" }
        }
      },
      "Asset": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "category": { "type": "string" },
          "emoji": { "type": "string" },
          "purchase_date": { "type": "string", "format": "date" },
          "purchase_value": { "type": "number" },
          "replacement_cost": { "type": "number" },
          "location": { "type": "string" },
          "serial_number": { "type": "string", "description": "Encrypted in DB" },
          "warranty_expiry": { "type": "string", "format": "date" },
          "notes": { "type": "string" }
        }
      },
      "Vehicle": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "make": { "type": "string" },
          "model": { "type": "string" },
          "registration": { "type": "string", "description": "Encrypted in DB" },
          "type": { "type": "string" },
          "emoji": { "type": "string" },
          "purchase_date": { "type": "string", "format": "date" },
          "purchase_value": { "type": "number" },
          "monthly_maintenance_cost": { "type": "number" },
          "mot_due": { "type": "string", "format": "date" },
          "tax_due": { "type": "string", "format": "date" }
        }
      },
      "VehicleService": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "date": { "type": "string", "format": "date" },
          "description": { "type": "string" },
          "cost": { "type": "number" },
          "mileage": { "type": "integer" }
        }
      },
      "VehicleFinance": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "provider": { "type": "string" },
          "total_amount": { "type": "number" },
          "remaining_balance": { "type": "number" },
          "monthly_payment": { "type": "number" },
          "interest_rate": { "type": "number" },
          "start_date": { "type": "string", "format": "date" },
          "end_date": { "type": "string", "format": "date" },
          "payment_day": { "type": "integer" },
          "frequency": { "type": "string", "enum": ["monthly", "weekly"] }
        }
      },
      "RecurringCharge": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "amount": { "type": "number" },
          "segment": { "type": "string", "enum": ["household_bill", "insurance", "warranty", "subscription", "utility", "other", "vehicle_tax", "vehicle_mot", "vehicle_service", "vehicle_fuel"] },
          "frequency": { "type": "string", "enum": ["weekly", "monthly", "quarterly", "yearly", "one_off"] },
          "day_of_month": { "type": "integer" },
          "month_of_year": { "type": "integer" },
          "day_of_week": { "type": "integer" },
          "exact_date": { "type": "string", "format": "date" },
          "start_date": { "type": "string", "format": "date" },
          "adjust_for_working_day": { "type": "integer" },
          "linked_entity_type": { "type": "string", "enum": ["vehicle", "asset", "member", "pet", "general"] },
          "linked_entity_id": { "type": "integer" },
          "notes": { "type": "string" },
          "is_active": { "type": "integer" }
        }
      },
      "FinanceIncome": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "member_id": { "type": "integer" },
          "employer": { "type": "string" },
          "role": { "type": "string" },
          "amount": { "type": "number" },
          "frequency": { "type": "string" },
          "payment_day": { "type": "integer" },
          "is_primary": { "type": "integer" }
        }
      },
      "Saving": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "institution": { "type": "string" },
          "account_name": { "type": "string" },
          "current_balance": { "type": "number" },
          "emoji": { "type": "string" }
        }
      },
      "Pot": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "savings_id": { "type": "integer" },
          "name": { "type": "string" },
          "target_amount": { "type": "number" },
          "current_amount": { "type": "number" },
          "emoji": { "type": "string" }
        }
      },
      "CurrentAccount": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "bank_name": { "type": "string" },
          "account_name": { "type": "string" },
          "current_balance": { "type": "number" },
          "emoji": { "type": "string" }
        }
      },
      "AdminTestResult": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "test_type": { "type": "string", "enum": ["backend", "frontend"] },
          "suite_name": { "type": "string" },
          "passes": { "type": "integer" },
          "fails": { "type": "integer" },
          "total": { "type": "integer" },
          "duration": { "type": "number" },
          "version": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "AdminVersionHistory": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "version": { "type": "string" },
          "comment": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      }
    }
  },
  "security": [{ "bearerAuth": [] }],
  "paths": {
    "/auth/register": {
      "post": {
        "summary": "Register new user and first household",
        "tags": ["Auth"],
        "requestBody": {
          "content": { "application/json": { "schema": { "type": "object", "required": ["email", "password", "householdName"], "properties": { "email": { "type": "string" }, "password": { "type": "string" }, "householdName": { "type": "string" } } } } }
        },
        "responses": { "201": { "description": "Created" } }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Login",
        "tags": ["Auth"],
        "requestBody": {
          "content": { "application/json": { "schema": { "type": "object", "required": ["password"], "properties": { "email": { "type": "string" }, "username": { "type": "string" }, "password": { "type": "string" } } } } }
        },
        "responses": { "200": { "description": "OK" } }
      }
    },
    "/auth/profile": {
      "get": { "summary": "Get current user profile", "tags": ["Auth"], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update current user profile", "tags": ["Auth"], "responses": { "200": { "description": "Updated" } } }
    },
    "/auth/my-households": {
      "get": { "summary": "List households user belongs to", "tags": ["Auth"], "responses": { "200": { "description": "OK" } } }
    },
    "/households": {
      "post": {
        "summary": "Create a new household",
        "tags": ["Households"],
        "responses": { "201": { "description": "Created" } }
      }
    },
    "/households/{id}": {
      "get": { "summary": "Get household details", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update household details (Admin Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete household (Admin Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/users": {
      "get": { "summary": "List household users (Member Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add user to household (Admin Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Added" } } }
    },
    "/households/{id}/details": {
      "get": { "summary": "Get house physical details", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update house physical details", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } }
    },
    "/households/{id}/members": {
      "get": { "summary": "List family members", "tags": ["Members"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create family member", "tags": ["Members"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/members/{itemId}": {
      "get": { "summary": "Get family member", "tags": ["Members"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update family member", "tags": ["Members"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete family member", "tags": ["Members"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/assets": {
      "get": { "summary": "List general assets", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK", "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Asset" } } } } } } },
      "post": { "summary": "Create general asset", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/assets/{itemId}": {
      "get": { "summary": "Get asset", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update asset", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete asset", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/vehicles": {
      "get": { "summary": "List vehicles", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK", "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Vehicle" } } } } } } },
      "post": { "summary": "Create vehicle", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/vehicles/{itemId}": {
      "get": { "summary": "Get vehicle", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update vehicle", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete vehicle", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/services": {
      "get": { "summary": "List vehicle services", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add service record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/services/{itemId}": {
      "put": { "summary": "Update service record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete service record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/finance": {
      "get": { "summary": "List vehicle finance records", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add finance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/finance/{itemId}": {
      "put": { "summary": "Update finance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete finance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/insurance": {
      "get": { "summary": "List vehicle insurance records", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add insurance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/insurance/{itemId}": {
      "put": { "summary": "Update insurance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete insurance record", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/service_plans": {
      "get": { "summary": "List vehicle service plans", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add service plan", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/vehicles/{vehicleId}/service_plans/{itemId}": {
      "put": { "summary": "Update service plan", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete service plan", "tags": ["Assets"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "vehicleId", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/finance/income": {
      "get": { "summary": "List income sources", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create income source", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/finance/income/{itemId}": {
      "put": { "summary": "Update income source", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete income source", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/finance/charges": {
      "get": { "summary": "List recurring charges", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create recurring charge", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/finance/charges/{chargeId}": {
      "get": { "summary": "Get charge details", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "chargeId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "put": { "summary": "Update charge (use is_active=0 to archive)", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "chargeId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Soft-delete (archive) charge", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "chargeId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Archived" } } }
    },
    "/households/{id}/finance/savings": {
      "get": { "summary": "List savings accounts", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create savings account", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/finance/savings/{itemId}": {
      "put": { "summary": "Update savings account", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete savings account", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "itemId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/finance/savings/{savingsId}/pots": {
      "get": { "summary": "List pots for account", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "savingsId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create pot", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "savingsId", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/finance/current-accounts": {
      "get": { "summary": "List current accounts", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create current account", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/finance/assignments": {
      "get": { "summary": "Get member assignments", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create assignment", "tags": ["Finance"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Assigned" } } }
    },
    "/households/{id}/meals": {
      "get": { "summary": "List meal recipes", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Create meal recipe", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/meals/{mealId}": {
      "put": { "summary": "Update meal recipe", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "mealId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Updated" } } },
      "delete": { "summary": "Delete meal recipe", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }, { "in": "path", "name": "mealId", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Deleted" } } }
    },
    "/households/{id}/meal-plans": {
      "get": { "summary": "Get meal plan schedule", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Add meal to plan", "tags": ["Meals"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "201": { "description": "Created" } } }
    },
    "/households/{id}/backups": {
      "get": { "summary": "List household backups (Admin Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "OK" } } },
      "post": { "summary": "Trigger manual backup (Admin Only)", "tags": ["Households"], "parameters": [{ "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }], "responses": { "200": { "description": "Created" } } }
    },
    "/admin/test-results": {
      "get": {
        "summary": "Get system test results (Admin Only)",
        "tags": ["Admin"],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/AdminTestResult" }
                }
              }
            }
          }
        }
      }
    },
    "/admin/version-history": {
      "get": {
        "summary": "Get platform version history (Admin Only)",
        "tags": ["Admin"],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/AdminVersionHistory" }
                }
              }
            }
          }
        }
      }
    }
  }
}